<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Pack Designer - Dashboard</title>
    <link rel="icon" type="image/png" href="Logo1.png">
    <link rel="shortcut icon" type="image/png" href="Logo1.png">
    <style>
        :root {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --accent-orange: #f39c12;
            --text-main: #e0e0e0;
            --text-dim: #a0a0a0;
            --border-color: #333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header B√∂l√ºm√º */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 20px;
            padding-top: 10px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
            position: sticky;
            top: 0;
            z-index: 1000;
            background-color: var(--bg-color);
        }

        .logo-area {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-area img {
            height: 50px;
            width: auto;
        }

        .logo-area h1 {
            color: var(--accent-orange);
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        nav button {
            background: none;
            border: none;
            color: var(--text-dim);
            padding: 10px 15px;
            cursor: pointer;
            font-weight: bold;
        }

        nav button.active {
            color: var(--text-main);
            border-bottom: 2px solid var(--accent-orange);
        }

        /* Header Right Section */
        .header-right {
            text-align: right;
        }

        .version {
            font-size: 0.7rem;
            color: var(--text-dim);
            margin-bottom: 5px;
            font-weight: 500;
        }

        /* Input Fields */
        input[type="number"],
        input[type="text"] {
            background: #2a2a2a;
            border: 1px solid #444;
            color: var(--text-main);
            padding: 10px;
            border-radius: 6px;
            width: 100%;
            font-size: 1rem;
            font-family: inherit;
            box-sizing: border-box;
        }

        input[type="number"]:focus,
        input[type="text"]:focus {
            outline: none;
            border-color: var(--accent-orange);
        }

        .value-box input {
            background: transparent;
            border: none;
            color: var(--text-main);
            font-weight: bold;
            padding: 0;
            flex: 1;
        }

        .value-box input:focus {
            outline: none;
            color: var(--accent-orange);
        }

        /* Select Dropdown */
        select {
            background: #2a2a2a;
            border: 1px solid #444;
            color: var(--text-main);
            padding: 10px;
            border-radius: 6px;
            width: 100%;
            font-size: 1rem;
            font-family: inherit;
            cursor: pointer;
            box-sizing: border-box;
        }

        select:focus {
            outline: none;
            border-color: var(--accent-orange);
        }

        select option {
            background: #2a2a2a;
            color: var(--text-main);
        }

        /* Grid Yapƒ±sƒ± */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border-color);
        }

        h3 {
            color: var(--accent-orange);
            font-size: 0.9rem;
            margin-top: 0;
            text-transform: uppercase;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }

        /* Input ve Veri Alanlarƒ± */
        .input-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            font-size: 0.8rem;
            color: var(--text-dim);
            margin-bottom: 5px;
        }

        .value-box {
            background: #2a2a2a;
            padding: 10px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .highlight-value {
            color: var(--accent-orange);
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* Konfig√ºrasyon Kutusu */
        .config-box {
            text-align: center;
            padding: 30px;
            border: 2px dashed var(--accent-orange);
            margin: 20px 0;
            font-size: 2.5rem;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }

        .config-input-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .config-input-group input {
            width: 80px;
            text-align: center;
            font-size: 2rem;
            font-weight: bold;
            padding: 10px;
            background: #2a2a2a;
            border: 2px solid var(--accent-orange);
            color: var(--accent-orange);
        }

        .config-input-group label {
            font-size: 2rem;
            color: var(--accent-orange);
            font-weight: bold;
            margin: 0;
        }

        /* Metrik Tablosu */
        .metrics-list {
            list-style: none;
            padding: 0;
        }

        .metrics-list li {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #2a2a2a;
            font-size: 0.9rem;
        }

        /* Alt Paneller (Hesaplayƒ±cƒ±lar) */
        .bottom-row {
            grid-column: span 3;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        /* Butonlar */
        .btn-primary {
            background-color: var(--accent-orange);
            color: black;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
        }

        .btn-primary:hover {
            background-color: #e68a00;
        }

        /* Responsive */
        @media (max-width: 900px) {

            .dashboard-grid,
            .bottom-row {
                grid-template-columns: 1fr;
            }
        }

        .footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            text-align: center;
            color: var(--text-dim);
            font-size: 0.9rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 20px;
        }

        .visitor-badge {
            background: #2a2a2a;
            padding: 5px 15px;
            border-radius: 20px;
            border: 1px solid #444;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .visitor-count {
            color: var(--accent-orange);
            font-weight: bold;
            font-family: 'Courier New', monospace;
            letter-spacing: 1px;
        }

        @media (max-width: 600px) {
            .footer {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>

<body>

    <div class="container">
        <header>
            <div class="logo-area">
                <img src="logo3.png" alt="Smart Pack Designer Logo">
                <h1>SMART PACK DESIGNER</h1>
            </div>
            <nav>
                <button data-page="quickstart">QUICK START</button>
                <button data-page="dashboard" class="active">DASHBOARD</button>
                <button data-page="utilities">UTILITIES</button>
                <button data-page="livedata">LIVE DATA</button>
                <button data-page="about">ABOUT</button>
            </nav>
            <div class="header-right">
                <div class="version">v1.4.2</div>
                <div class="connection">
                    CONNECTION <span style="color: #ff4444;">‚ñ†</span>
                </div>
            </div>
        </header>

        <!-- DASHBOARD PAGE -->
        <div class="page" id="page-dashboard">
            <div class="dashboard-grid">
                <div class="card">
                    <h3>Target Specifications</h3>
                    <div class="input-group">
                        <label>CELL FORMAT</label>
                        <select id="cellFormat" class="input-select">
                            <option value="21700">21700 (21mm x 70mm)</option>
                            <option value="18650">18650 (18mm x 65mm)</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>NOMINAL VOLTAGE (V)</label>
                        <div class="value-box">
                            <input type="number" id="nominalVoltage" value="52" min="0" step="1">
                            <span class="unit">(V)</span>
                        </div>
                    </div>
                    <div class="input-group">
                        <label>MAX DISCHARGE (A)</label>
                        <div class="value-box">
                            <input type="number" id="maxDischarge" value="20" min="0" step="1" style="color: #2ecc71;">
                            <span class="unit">/ 40A</span>
                        </div>
                    </div>
                    <div class="input-group">
                        <label>CELL MODEL</label>
                        <select id="cellModel">
                            <option value="SAMSUNG 40T" selected>SAMSUNG 40T</option>
                            <option value="Molicel INR‚Äë21700‚ÄëP45B">Molicel INR‚Äë21700‚ÄëP45B</option>
                            <option value="Tenpower INR21700‚Äë40TG">Tenpower INR21700‚Äë40TG</option>
                            <option value="Tenpower INR21700‚Äë40XG">Tenpower INR21700‚Äë40XG</option>
                            <option value="Eve INR21700‚Äë40PL">Eve INR21700‚Äë40PL</option>
                            <option value="Samsung 50G">Samsung 50G</option>
                            <option value="Samsung INR21700 50E">Samsung INR21700 50E</option>
                            <option value="LG INR21700M50LT">LG INR21700M50LT</option>
                            <option value="Nitecore Li‚ÄëIon 21700">Nitecore Li‚ÄëIon 21700</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>CELL COUNT</label>
                        <div class="value-box" id="cellCount">56</div>
                    </div>
                    <button class="btn-primary" style="background:#333; color:white;"
                        onclick="showDiagram()">CONFIGURATION DIAGRAM</button>
                </div>

                <div class="card">
                    <h3>Pack Configuration</h3>
                    <div class="config-box">
                        <div class="config-input-group">
                            <input type="number" id="seriesCount" value="14" min="1" max="99" step="1">
                            <label>S</label>
                        </div>
                        <div class="config-input-group">
                            <input type="number" id="parallelCount" value="4" min="1" max="99" step="1">
                            <label>P</label>
                        </div>
                    </div>
                    <div class="metrics-list">
                        <li><span>Estimated Price:</span> <span id="estimatedPrice">‚Ç¨ ---</span></li>
                        <li><span>Connector:</span> <span id="connector">XT60 / XT90</span></li>
                        <li><span>Busbar:</span> <span id="busbar">0.20mm x 10mm</span></li>
                        <li>
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                                <span style="display: flex; align-items: center; gap: 5px;">
                                    Range
                                    <span style="font-size: 0.8em; color: var(--text-dim);">(@ <input type="number"
                                            id="consumptionInput" value="15"
                                            style="width: 35px; background: transparent; border: none; border-bottom: 1px solid var(--text-dim); color: var(--accent-orange); text-align: center; padding: 0;">
                                        Wh/km)</span>:
                                </span>
                                <span id="estRange">-- km</span>
                            </div>
                        </li>
                    </div>
                </div>

                <div class="card">
                    <h3>Estimated Metrics</h3>
                    <ul class="metrics-list">
                        <li><span>Total Voltage:</span> <strong id="totalVoltage">51.8V</strong></li>
                        <li><span>Total Capacity:</span> <strong id="totalCapacity">20Ah</strong></li>
                        <li><span>Total Weight:</span> <strong id="totalWeight">3.92 Kg</strong></li>
                        <li><span>Total Energy:</span> <strong id="totalEnergy">1036 Wh</strong></li>
                        <li><span>Cycle Life:</span> <strong id="cycleLife">500</strong></li>
                        <li><span>Volumetric Density:</span> <strong id="volumetricDensity">431 Wh/L</strong></li>
                    </ul>
                </div>

                <div class="bottom-row">
                    <div class="card">
                        <h3>Voltage Drop Calculator</h3>
                        <div style="display: flex; gap: 10px; align-items: center; margin-top: 15px;">
                            <div style="flex:1">
                                <label>Wire Length (cm)</label>
                                <div class="value-box">750</div>
                            </div>
                            <div style="flex:1">
                                <label>Voltage Loss</label>
                                <div class="value-box"><span class="highlight-value">0.52V</span></div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Thermal Estimator</h3>
                        <div
                            style="height: 100px; background: #252525; border-radius: 8px; position: relative; overflow: hidden;">
                            <svg id="thermal-chart" width="100%" height="100%" viewBox="0 0 300 100"
                                preserveAspectRatio="none">
                                <!-- Chart will be drawn by JS -->
                            </svg>
                        </div>
                        <div style="text-align: right; margin-top: 10px;">
                            <span style="color: var(--accent-orange);">Est. Temp Rise: 15¬∞C</span>
                        </div>
                    </div>
                </div>
            </div>

            <div style="display: flex; gap: 20px; margin-top: 20px;">
                <button class="btn-primary" onclick="showUnderDevelopment()">SAVE DESIGN</button>
                <button class="btn-primary" style="background:#444; color: white;" onclick="switchPage('bmswizard')">BMS
                    WIZARD</button>
            </div>
        </div>
    </div>

    <!-- QUICK START PAGE -->
    <div class="page" id="page-quickstart" style="display: none;">
        <div class="card" style="max-width: 900px; margin: 0 auto;">
            <h2 style="color: var(--accent-orange); margin-top: 0;">üöÄ Quick Start Guide</h2>

            <div style="margin: 30px 0;">
                <h3>Step 1: Choose Your Cell Model</h3>
                <p>Select from our database of high-quality 21700 cells. Each cell has different capacity, weight, and
                    cycle life characteristics.</p>
            </div>

            <div style="margin: 30px 0;">
                <h3>Step 2: Configure Your Pack</h3>
                <p>Set the <strong>S (Series)</strong> and <strong>P (Parallel)</strong> configuration:</p>
                <ul style="line-height: 1.8;">
                    <li><strong>S (Series)</strong>: Increases voltage. Total Voltage = S √ó Cell Voltage (3.7V)</li>
                    <li><strong>P (Parallel)</strong>: Increases capacity. Total Capacity = P √ó Cell Capacity</li>
                </ul>
            </div>

            <div style="margin: 30px 0;">
                <h3>Step 3: Review Metrics</h3>
                <p>All calculations update automatically including:</p>
                <ul style="line-height: 1.8;">
                    <li>Total Voltage, Capacity, Weight</li>
                    <li>Energy Density (Wh/L)</li>
                    <li>Cycle Life expectations</li>
                    <li>Estimated price and component recommendations</li>
                </ul>
            </div>

            <div style="margin: 30px 0;">
                <h3>Step 4: Save or Export</h3>
                <p>Use the "SAVE DESIGN" button to save your configuration for later or share with your team.</p>
            </div>
        </div>
    </div>

    <!-- UTILITIES PAGE -->
    <div class="page" id="page-utilities" style="display: none;">
        <h2 style="color: var(--accent-orange); margin-bottom: 30px;">üîß Utilities & Calculators</h2>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
            <div class="card">
                <h3>üîå Ohm's Law Calculator</h3>
                <div class="input-group">
                    <label>Voltage (V)</label>
                    <input type="number" placeholder="Enter voltage" step="0.1">
                </div>
                <div class="input-group">
                    <label>Current (A)</label>
                    <input type="number" placeholder="Enter current" step="0.1">
                </div>
                <div class="input-group">
                    <label>Power (W)</label>
                    <div class="value-box">Auto-calculated</div>
                </div>
            </div>

            <div class="card">
                <h3>‚ö° Wire Gauge Calculator</h3>
                <div class="input-group">
                    <label>Current (A)</label>
                    <input type="number" placeholder="Max current">
                </div>
                <div class="input-group">
                    <label>Length (m)</label>
                    <input type="number" placeholder="Wire length">
                </div>
                <div class="value-box"
                    style="margin-top: 15px; background: var(--accent-orange); color: black; font-weight: bold;">
                    Recommended: AWG 12
                </div>
            </div>

            <div class="card">
                <h3>üìä Energy Density</h3>
                <ul class="metrics-list">
                    <li><span>21700 Cells:</span> <strong>~250 Wh/kg</strong></li>
                    <li><span>18650 Cells:</span> <strong>~220 Wh/kg</strong></li>
                    <li><span>LiFePO4:</span> <strong>~160 Wh/kg</strong></li>
                    <li><span>Lead Acid:</span> <strong>~40 Wh/kg</strong></li>
                </ul>
            </div>

            <div class="card">
                <h3>üå°Ô∏è Temperature Converter</h3>
                <div class="input-group">
                    <label>Celsius (¬∞C)</label>
                    <input type="number" placeholder="Enter ¬∞C" step="0.1">
                </div>
                <div class="input-group">
                    <label>Fahrenheit (¬∞F)</label>
                    <input type="number" placeholder="Enter ¬∞F" step="0.1">
                </div>
            </div>

            <div class="card">
                <h3>‚è±Ô∏è Runtime Calculator</h3>
                <div class="input-group">
                    <label>Battery Capacity (Ah)</label>
                    <input type="number" placeholder="Enter Ah" step="0.1">
                </div>
                <div class="input-group">
                    <label>Load Current (A)</label>
                    <input type="number" placeholder="Enter A" step="0.1">
                </div>
                <div class="value-box" style="margin-top: 15px;">
                    <span>Runtime:</span> <strong>-- hours</strong>
                </div>
            </div>

            <div class="card">
                <h3>üí∞ Cost per kWh</h3>
                <div class="input-group">
                    <label>Total Cost (‚Ç¨)</label>
                    <input type="number" placeholder="Pack cost">
                </div>
                <div class="input-group">
                    <label>Capacity (kWh)</label>
                    <input type="number" placeholder="Total kWh">
                </div>
                <div class="value-box" style="margin-top: 15px;">
                    <span>Cost per kWh:</span> <strong>‚Ç¨-- /kWh</strong>
                </div>
            </div>
        </div>
    </div>

    <!-- CONFIGURATION DIAGRAM PAGE -->
    <div class="page" id="page-diagram" style="display: none;">
        <div style="margin-bottom: 20px;">
            <button class="btn-primary" style="background:#444; color: white; width: auto; padding: 10px 20px;"
                onclick="switchPage('dashboard')">‚Üê Back to Dashboard</button>
        </div>


        <h2 style="color: var(--accent-orange); margin-bottom: 20px;">üìä Battery Pack Configuration</h2>
        <div style="text-align: center; margin-bottom: 30px;">
            <h3 id="diagram-config" style="color: var(--text-main); margin: 10px 0;">14S 4P Configuration</h3>
            <p style="color: var(--text-dim);">Total Cells: <span id="diagram-total-cells">56</span></p>
        </div>

        <!-- Two Column Layout -->
        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px;">
            <!-- Left Column - Diagram -->
            <div class="card">
                <h3>Pack Diagram</h3>

                <!-- SVG Canvas for battery diagram -->
                <div style="background: #1a1a1a; padding: 30px; border-radius: 12px; overflow: auto;">
                    <svg id="battery-diagram" width="100%" height="600" style="display: block; margin: 0 auto;">
                        <!-- Battery cells will be drawn here by JavaScript -->
                    </svg>
                </div>

                <div style="margin-top: 20px; padding: 20px; background: #252525; border-radius: 8px;">
                    <h3 style="color: var(--accent-orange); margin-top: 0;">Legend:</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div
                                style="width: 40px; height: 60px; background: linear-gradient(135deg, #f39c12, #e67e22); border-radius: 5px; border: 2px solid #d68910;">
                            </div>
                            <span>21700 Cell (3.7V)</span>
                        </div>
                        <div>
                            <p style="margin: 5px 0;"><strong style="color: #e74c3c;">Series (S):</strong> Vertical red
                                connections increase voltage</p>
                            <p style="margin: 5px 0;"><strong style="color: #2ecc71;">Parallel (P):</strong> Horizontal
                                green connections increase capacity</p>
                        </div>
                        <div>
                            <p style="margin: 5px 0;"><strong style="color: #e74c3c;">+ Terminal:</strong> Red positive
                                terminal (right side)</p>
                            <p style="margin: 5px 0;"><strong style="color: #3498db;">‚àí Terminal:</strong> Blue negative
                                terminal (left side)</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column - Estimated Metrics -->
            <div>
                <div class="card">
                    <h3>Estimated Metrics</h3>
                    <ul class="metrics-list">
                        <li><span>Total Voltage:</span> <strong id="diagram-totalVoltage">51.8V</strong></li>
                        <li><span>Total Capacity:</span> <strong id="diagram-totalCapacity">20Ah</strong></li>
                        <li><span>Total Weight:</span> <strong id="diagram-totalWeight">3.92 Kg</strong></li>
                        <li><span>Total Energy:</span> <strong id="diagram-totalEnergy">1036 Wh</strong></li>
                        <li><span>Cycle Life:</span> <strong id="diagram-cycleLife">500</strong></li>
                        <li><span>Volumetric Density:</span> <strong id="diagram-volumetricDensity">431 Wh/L</strong>
                        </li>
                    </ul>
                </div>

                <div class="card" style="margin-top: 20px;">
                    <h3>Pack Configuration</h3>
                    <ul class="metrics-list">
                        <li><span>Estimated Price:</span> <span id="diagram-estimatedPrice">‚Ç¨ ---</span></li>
                        <li><span>Connector:</span> <span id="diagram-connector">XT60</span></li>
                        <li><span>Busbar:</span> <span id="diagram-busbar">0.20mm x 10mm</span></li>
                        <li><span>Est. Range:</span> <span id="diagram-estRange">-- km</span></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- LIVE DATA PAGE -->
    <div class="page" id="page-livedata" style="display: none;">
        <h2 style="color: var(--accent-orange); margin-bottom: 30px;">üì° Live Battery Pack Data</h2>

        <!-- Connection Warning -->
        <div class="card"
            style="background: linear-gradient(135deg, #c0392b, #e74c3c); border: 2px solid #e74c3c; text-align: center; padding: 40px;">
            <h2 style="color: white; margin-top: 0; font-size: 2rem;">‚ö†Ô∏è Please Connect Your Device</h2>
            <p style="color: #fff; font-size: 1.2rem; margin: 20px 0;">No battery pack is currently connected to the
                system.</p>
            <p style="color: #ecf0f1; margin: 10px 0;">To view live data, please connect your Smart Pack via:</p>
            <ul style="list-style: none; padding: 0; margin: 20px 0; color: #ecf0f1; font-size: 1.1rem;">
                <li>‚úì USB Connection</li>
                <li>‚úì Bluetooth Module</li>
                <li>‚úì WiFi Gateway</li>
            </ul>
            <button class="btn-primary"
                style="background: white; color: #e74c3c; margin-top: 20px; border: 2px solid white;">Connect
                Device</button>
        </div>

        <!-- Live Data Preview (Hidden until connected) -->
        <div style="display: none;">
            <div
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px;">
                <div class="card">
                    <h3>‚ö° Pack Voltage</h3>
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 3rem; color: var(--accent-orange); font-weight: bold;">51.8V</div>
                        <p style="color: var(--text-dim);">Normal Range</p>
                    </div>
                </div>

                <div class="card">
                    <h3>üîã State of Charge</h3>
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 3rem; color: #2ecc71; font-weight: bold;">87%</div>
                        <div
                            style="background: #2a2a2a; height: 20px; border-radius: 10px; margin-top: 10px; overflow: hidden;">
                            <div
                                style="background: linear-gradient(90deg, #2ecc71, #27ae60); height: 100%; width: 87%;">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>üå°Ô∏è Temperature</h3>
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 3rem; color: #f39c12; font-weight: bold;">32¬∞C</div>
                        <p style="color: var(--text-dim);">Optimal</p>
                    </div>
                </div>

                <div class="card">
                    <h3>‚ö° Current Flow</h3>
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 3rem; color: #3498db; font-weight: bold;">12.3A</div>
                        <p style="color: var(--text-dim);">Discharging</p>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top: 20px;">
                <h3>üìä Cell Voltages</h3>
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); gap: 10px; margin-top: 20px;">
                    <!-- Cell voltage indicators would be generated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- ABOUT PAGE -->
    <div class="page" id="page-about" style="display: none;">
        <div class="card" style="max-width: 700px; margin: 0 auto; text-align: center; padding: 60px 40px;">
            <h1 style="color: var(--accent-orange); font-size: 3rem; margin-top: 0;">Smart Pack Designer</h1>

            <div
                style="margin: 40px 0; padding: 30px; background: linear-gradient(135deg, #1e1e1e, #2a2a2a); border-radius: 15px; border: 2px solid var(--accent-orange);">
                <h2 style="color: var(--text-main); font-size: 2rem; margin: 0 0 10px 0;">Emre Karabek</h2>
                <p style="color: var(--accent-orange); font-size: 1.3rem; font-weight: bold; margin: 10px 0;">Embedded
                    System Engineer</p>
                <p style="color: var(--text-dim); font-size: 1.1rem; margin: 15px 0;">¬© 2026</p>
            </div>

            <div style="margin-top: 40px; color: var(--text-dim);">
                <p style="font-size: 1.1rem; line-height: 1.8;">
                    Professional battery pack design and configuration tool<br>
                    for creating custom 21700 lithium-ion battery solutions.
                </p>
            </div>

            <div style="margin-top: 40px; display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                <div style="padding: 20px; background: #252525; border-radius: 10px; min-width: 150px;">
                    <div style="font-size: 2rem; color: var(--accent-orange); font-weight: bold;">v1.4.0</div>
                    <div style="color: var(--text-dim); margin-top: 5px;">Version</div>
                </div>
                <div style="padding: 20px; background: #252525; border-radius: 10px; min-width: 150px;">
                    <div style="font-size: 2rem; color: var(--accent-orange); font-weight: bold;">9+</div>
                    <div style="color: var(--text-dim); margin-top: 5px;">Cell Models</div>
                </div>
                <div style="padding: 20px; background: #252525; border-radius: 10px; min-width: 150px;">
                    <div style="font-size: 2rem; color: var(--accent-orange); font-weight: bold;">21700</div>
                    <div style="color: var(--text-dim); margin-top: 5px;">Cell Format</div>
                </div>
            </div>
        </div>
    </div>

    <!-- BMS WIZARD PAGE -->
    <div class="page" id="page-bmswizard" style="display: none;">
        <div class="card" style="max-width: 900px; margin: 0 auto; text-align: center; padding: 60px 40px;">
            <h1 style="color: var(--accent-orange); font-size: 3rem; margin-top: 0;">üîß BMS Wizard</h1>

            <div
                style="margin: 40px 0; padding: 40px; background: linear-gradient(135deg, #2a2a2a, #1e1e1e); border-radius: 15px; border: 2px dashed var(--accent-orange);">
                <div style="font-size: 4rem; margin-bottom: 20px;">üöß</div>
                <h2 style="color: var(--text-main); font-size: 2rem; margin: 20px 0;">Under Development</h2>
                <p style="color: var(--text-dim); font-size: 1.2rem; line-height: 1.8; margin: 20px 0;">
                    The BMS (Battery Management System) Wizard is currently being developed.<br>
                    This feature will help you select the perfect BMS for your battery pack configuration.
                </p>
            </div>

            <div style="margin-top: 40px;">
                <h3 style="color: var(--accent-orange); text-align: left;">Coming Soon:</h3>
                <ul style="text-align: left; color: var(--text-dim); font-size: 1.1rem; line-height: 2;">
                    <li>‚úì Automatic BMS recommendation based on your pack configuration</li>
                    <li>‚úì Current rating calculator</li>
                    <li>‚úì Balance wire configuration guide</li>
                    <li>‚úì BMS compatibility checker</li>
                    <li>‚úì Wiring diagrams and installation guides</li>
                </ul>
            </div>

            <button class="btn-primary" style="margin-top: 40px;" onclick="switchPage('dashboard')">‚Üê Back to
                Dashboard</button>
        </div>
    </div>

    <footer class="footer">
        <div>&copy; 2026 Smart Pack Designer</div>
        <div class="visitor-badge">
            <span>üëÅÔ∏è Visitor Count:</span>
            <span id="visitor-count" class="visitor-count">...</span>
        </div>
    </footer>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB1flyau_sYOQsYuRO30W9ajJ3uvjrUhjE",
            authDomain: "smartpack-31275.firebaseapp.com",
            projectId: "smartpack-31275",
            storageBucket: "smartpack-31275.firebasestorage.app",
            messagingSenderId: "208573135725",
            appId: "1:208573135725:web:4c344d4db1b18516df7864",
            measurementId: "G-7KSZFV3PVV",
            databaseURL: "https://smartpack-31275-default-rtdb.europe-west1.firebasedatabase.app"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Cell specifications database
        const cellSpecs = {
            // 21700 Cells
            "SAMSUNG 40T": { format: "21700", capacity: 4.0, voltage: 3.7, weight: 69, cycleLife: 500, volume: 16.5, price: 4.5 },
            "Molicel INR‚Äë21700‚ÄëP45B": { format: "21700", capacity: 4.5, voltage: 3.7, weight: 70, cycleLife: 500, volume: 16.5, price: 6.5 },
            "Tenpower INR21700‚Äë40TG": { format: "21700", capacity: 4.0, voltage: 3.7, weight: 68, cycleLife: 800, volume: 16.5, price: 5.0 },
            "Tenpower INR21700‚Äë40XG": { format: "21700", capacity: 4.0, voltage: 3.7, weight: 68, cycleLife: 800, volume: 16.5, price: 5.0 },
            "Eve INR21700‚Äë40PL": { format: "21700", capacity: 4.0, voltage: 3.7, weight: 69, cycleLife: 800, volume: 16.5, price: 4.8 },
            "Samsung 50G": { format: "21700", capacity: 5.0, voltage: 3.7, weight: 69, cycleLife: 500, volume: 16.5, price: 5.5 },
            "Samsung INR21700 50E": { format: "21700", capacity: 5.0, voltage: 3.7, weight: 70, cycleLife: 500, volume: 16.5, price: 5.8 },
            "LG INR21700M50LT": { format: "21700", capacity: 5.0, voltage: 3.7, weight: 69, cycleLife: 500, volume: 16.5, price: 5.5 },
            "Nitecore Li‚ÄëIon 21700": { format: "21700", capacity: 5.0, voltage: 3.7, weight: 70, cycleLife: 500, volume: 16.5, price: 7.0 },

            // 18650 Cells
            "Samsung 30Q": { format: "18650", capacity: 3.0, voltage: 3.7, weight: 48, cycleLife: 500, volume: 11.0, price: 3.5 },
            "Samsung 25R": { format: "18650", capacity: 2.5, voltage: 3.7, weight: 45, cycleLife: 500, volume: 11.0, price: 3.2 },
            "LG HG2": { format: "18650", capacity: 3.0, voltage: 3.7, weight: 47, cycleLife: 500, volume: 11.0, price: 3.8 },
            "Sony VTC6": { format: "18650", capacity: 3.0, voltage: 3.7, weight: 46, cycleLife: 500, volume: 11.0, price: 4.2 },
            "Panasonic NCR18650B": { format: "18650", capacity: 3.4, voltage: 3.7, weight: 48, cycleLife: 500, volume: 11.0, price: 4.0 },
            "Samsung 35E": { format: "18650", capacity: 3.5, voltage: 3.7, weight: 48, cycleLife: 800, volume: 11.0, price: 4.5 }
        };

        function calculateMetrics() {
            // Get input values
            const S = parseInt(document.getElementById('seriesCount').value) || 0;
            const P = parseInt(document.getElementById('parallelCount').value) || 0;
            const maxDischarge = parseInt(document.getElementById('maxDischarge').value) || 20;
            const cellModel = document.getElementById('cellModel').value;
            const cell = cellSpecs[cellModel];

            if (!cell) return;

            // Calculate metrics
            const totalCells = S * P;
            const totalVoltage = (S * cell.voltage).toFixed(1);
            const totalCapacity = (P * cell.capacity).toFixed(1);
            const totalWeight = ((totalCells * cell.weight) / 1000).toFixed(2);
            const totalEnergy = (totalVoltage * totalCapacity).toFixed(0);
            const totalVolume = (totalCells * cell.volume / 1000).toFixed(2); // in Liters
            const volumetricDensity = (totalEnergy / totalVolume).toFixed(0);

            // Calculate price (cells + BMS + connectors + busbar + assembly)
            const cellsCost = totalCells * cell.price;
            const bmsCost = S * 8; // Approximate BMS cost per series cell
            const connectorsCost = 15;
            const busbarCost = S * 2;
            const assemblyCost = 30;
            const totalPrice = (cellsCost + bmsCost + connectorsCost + busbarCost + assemblyCost).toFixed(0);

            // Determine connector based on max discharge
            let connector = 'XT30';
            if (maxDischarge > 60) connector = 'XT90';
            else if (maxDischarge > 30) connector = 'XT60';
            else if (maxDischarge > 15) connector = 'XT60';

            // Determine busbar thickness based on current
            let busbar = '0.15mm x 8mm';
            if (maxDischarge > 50) busbar = '0.30mm x 12mm';
            else if (maxDischarge > 30) busbar = '0.20mm x 10mm';
            else if (maxDischarge > 15) busbar = '0.20mm x 8mm';

            // Calculate estimated range (using custom consumption Wh/km)
            const consumption = parseFloat(document.getElementById('consumptionInput').value) || 15;
            const estRange = (totalEnergy / consumption).toFixed(0);

            // Update display
            document.getElementById('cellCount').textContent = totalCells;
            document.getElementById('totalVoltage').textContent = totalVoltage + 'V';
            document.getElementById('totalCapacity').textContent = totalCapacity + 'Ah';
            document.getElementById('totalWeight').textContent = totalWeight + ' Kg';
            document.getElementById('totalEnergy').textContent = totalEnergy + ' Wh';
            document.getElementById('cycleLife').textContent = cell.cycleLife;
            document.getElementById('volumetricDensity').textContent = volumetricDensity + ' Wh/L';
            document.getElementById('estimatedPrice').textContent = '‚Ç¨ ' + totalPrice;
            document.getElementById('connector').textContent = connector;
            document.getElementById('busbar').textContent = busbar;
            document.getElementById('estRange').textContent = estRange + ' km';

            // Update nominal voltage input to match calculated voltage
            document.getElementById('nominalVoltage').value = Math.round(totalVoltage);

            // Update thermal chart
            updateThermalChart(maxDischarge, P);
        }

        // Update thermal estimator chart
        function updateThermalChart(current, P) {
            const svg = document.getElementById('thermal-chart');
            svg.innerHTML = '';

            // Constants
            const width = 300;
            const height = 100;
            const maxCurrentLimit = Math.max(current * 1.5, 50); // X-axis range
            const cellCurrent = current / P;

            // Thermal model: TempRise = k * (I_cell)^2
            // k = 0.25 (approximation factor)
            const k = 0.25;
            const currentTempRise = k * Math.pow(cellCurrent, 2);

            // Update temp text
            const tempText = document.querySelector('.card:last-child span[style*="accent-orange"]');
            if (tempText) tempText.textContent = `Est. Temp Rise: +${currentTempRise.toFixed(1)}¬∞C`;

            // Generate path data
            let pathData = `M 0 ${height}`;
            for (let i = 0; i <= width; i += 5) {
                const i_rel = (i / width) * maxCurrentLimit; // Current at this x-coord
                const i_cell_rel = i_rel / P;
                const temp_rise = k * Math.pow(i_cell_rel, 2);

                // Map temp to Y (0-100 scale, max temp ~60-80C)
                const y = height - (temp_rise * 1.5); // scaling factor
                pathData += ` L ${i} ${Math.max(0, y)}`;
            }
            pathData += ` L ${width} ${height} Z`;

            // Create gradient
            const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
            const gradient = document.createElementNS('http://www.w3.org/2000/svg', 'linearGradient');
            gradient.setAttribute('id', 'thermalGradient');
            gradient.setAttribute('x1', '0%');
            gradient.setAttribute('y1', '0%');
            gradient.setAttribute('x2', '0%');
            gradient.setAttribute('y2', '100%');

            const stop1 = document.createElementNS('http://www.w3.org/2000/svg', 'stop');
            stop1.setAttribute('offset', '0%');
            stop1.setAttribute('style', 'stop-color:#e74c3c;stop-opacity:0.8');

            const stop2 = document.createElementNS('http://www.w3.org/2000/svg', 'stop');
            stop2.setAttribute('offset', '100%');
            stop2.setAttribute('style', 'stop-color:#f39c12;stop-opacity:0.2');

            gradient.appendChild(stop1);
            gradient.appendChild(stop2);
            defs.appendChild(gradient);
            svg.appendChild(defs);

            // Draw area
            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            path.setAttribute('d', pathData);
            path.setAttribute('fill', 'url(#thermalGradient)');
            path.setAttribute('stroke', '#e74c3c');
            path.setAttribute('stroke-width', '2');
            svg.appendChild(path);

            // Draw current operating point line
            const operatingX = (current / maxCurrentLimit) * width;
            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            line.setAttribute('x1', operatingX);
            line.setAttribute('y1', 0);
            line.setAttribute('x2', operatingX);
            line.setAttribute('y2', height);
            line.setAttribute('stroke', '#fff');
            line.setAttribute('stroke-dasharray', '4');
            line.setAttribute('opacity', '0.7');
            svg.appendChild(line);

            // Draw operating point circle
            const operatingY = height - (currentTempRise * 1.5);
            if (operatingY > 0) {
                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('cx', operatingX);
                circle.setAttribute('cy', operatingY);
                circle.setAttribute('r', '4');
                circle.setAttribute('fill', '#fff');
                svg.appendChild(circle);
            }
        }

        // Update cell model options based on selected format
        function updateCellModels() {
            const format = document.getElementById('cellFormat').value;
            const cellModelSelect = document.getElementById('cellModel');

            // Clear existing options
            cellModelSelect.innerHTML = '';

            // Add filtered options
            Object.keys(cellSpecs).forEach(model => {
                if (cellSpecs[model].format === format) {
                    const option = document.createElement('option');
                    option.value = model;
                    option.textContent = model;
                    cellModelSelect.appendChild(option);
                }
            });

            // Recalculate after updating models
            calculateMetrics();
        }

        // Add event listeners
        document.addEventListener('DOMContentLoaded', function () {
            const seriesInput = document.getElementById('seriesCount');
            const parallelInput = document.getElementById('parallelCount');
            const cellModelSelect = document.getElementById('cellModel');
            const maxDischargeInput = document.getElementById('maxDischarge');
            const cellFormatSelect = document.getElementById('cellFormat');

            seriesInput.addEventListener('input', calculateMetrics);
            parallelInput.addEventListener('input', calculateMetrics);
            cellModelSelect.addEventListener('change', calculateMetrics);
            maxDischargeInput.addEventListener('input', calculateMetrics);
            cellFormatSelect.addEventListener('change', updateCellModels);
            // Also enable range calculation update on manual consumption input
            document.getElementById('consumptionInput').addEventListener('input', calculateMetrics);

            // Initial setup - populate cell models for default format
            updateCellModels();

            // Initial calculation
            calculateMetrics();

            // Firebase Visitor Counter
            const visitorCountRef = database.ref('visitorCount');

            // Increment visitor count in Firebase
            visitorCountRef.transaction(function (currentCount) {
                // If no count exists, start from 12450
                return (currentCount || 0) + 1;
            }).then(function (result) {
                if (result.committed) {
                    const countEl = document.getElementById('visitor-count');
                    if (countEl) {
                        countEl.textContent = result.snapshot.val().toLocaleString();
                    }
                }
            }).catch(function (error) {
                console.error('Visitor count update failed:', error);
                // Fallback to local storage if Firebase fails
                let vCount = localStorage.getItem('visitor_count');
                if (!vCount) {
                    vCount = 12450;
                } else {
                    vCount = parseInt(vCount) + 1;
                }
                localStorage.setItem('visitor_count', vCount);
                const countEl = document.getElementById('visitor-count');
                if (countEl) countEl.textContent = vCount.toLocaleString();
            });

            // Listen for real-time updates to visitor count
            visitorCountRef.on('value', function (snapshot) {
                const count = snapshot.val();
                if (count) {
                    const countEl = document.getElementById('visitor-count');
                    if (countEl) {
                        countEl.textContent = count.toLocaleString();
                    }
                }
            });

            // Page navigation
            setupPageNavigation();
        });

        // Page switching function
        function switchPage(pageName) {
            // Hide all pages
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.style.display = 'none');

            // Show selected page
            const selectedPage = document.getElementById('page-' + pageName);
            if (selectedPage) {
                selectedPage.style.display = 'block';
            }

            // Update active button
            const navButtons = document.querySelectorAll('nav button');
            navButtons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-page') === pageName) {
                    btn.classList.add('active');
                }
            });
        }

        // Setup navigation event listeners
        function setupPageNavigation() {
            const navButtons = document.querySelectorAll('nav button[data-page]');
            navButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const pageName = this.getAttribute('data-page');
                    switchPage(pageName);
                });
            });
        }

        // Show battery pack diagram
        function showDiagram() {
            const S = parseInt(document.getElementById('seriesCount').value) || 14;
            const P = parseInt(document.getElementById('parallelCount').value) || 4;

            // Update diagram info
            document.getElementById('diagram-config').textContent = S + 'S ' + P + 'P Configuration';
            document.getElementById('diagram-total-cells').textContent = S * P;

            // Copy metrics from dashboard to diagram page
            document.getElementById('diagram-totalVoltage').textContent = document.getElementById('totalVoltage').textContent;
            document.getElementById('diagram-totalCapacity').textContent = document.getElementById('totalCapacity').textContent;
            document.getElementById('diagram-totalWeight').textContent = document.getElementById('totalWeight').textContent;
            document.getElementById('diagram-totalEnergy').textContent = document.getElementById('totalEnergy').textContent;
            document.getElementById('diagram-cycleLife').textContent = document.getElementById('cycleLife').textContent;
            document.getElementById('diagram-volumetricDensity').textContent = document.getElementById('volumetricDensity').textContent;
            document.getElementById('diagram-estimatedPrice').textContent = document.getElementById('estimatedPrice').textContent;
            document.getElementById('diagram-connector').textContent = document.getElementById('connector').textContent;
            document.getElementById('diagram-busbar').textContent = document.getElementById('busbar').textContent;
            document.getElementById('diagram-estRange').textContent = document.getElementById('estRange').textContent;

            // Draw the diagram
            drawBatteryDiagram(S, P);

            // Switch to diagram page
            switchPage('diagram');
        }

        // Draw battery pack diagram in SVG
        function drawBatteryDiagram(S, P) {
            const svg = document.getElementById('battery-diagram');

            // Clear existing content
            svg.innerHTML = '';

            // Cell dimensions
            const cellWidth = 40;
            const cellHeight = 70;
            const cellGapX = 15;
            const cellGapY = 15;
            const cellRadius = 5;

            // Calculate SVG dimensions
            const totalWidth = P * cellWidth + (P - 1) * cellGapX + 100;
            const totalHeight = S * cellHeight + (S - 1) * cellGapY + 100;

            // Set viewBox to auto-size
            svg.setAttribute('viewBox', `0 0 ${totalWidth} ${totalHeight}`);
            svg.setAttribute('height', Math.min(totalHeight, 800));

            const startX = 50;
            const startY = 50;

            // Draw cells
            for (let row = 0; row < S; row++) {
                for (let col = 0; col < P; col++) {
                    const x = startX + col * (cellWidth + cellGapX);
                    const y = startY + row * (cellHeight + cellGapY);

                    // Create cell group
                    const cellGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');

                    // Create gradient for each cell
                    const gradientId = 'grad-' + row + '-' + col;
                    const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
                    const gradient = document.createElementNS('http://www.w3.org/2000/svg', 'linearGradient');
                    gradient.setAttribute('id', gradientId);
                    gradient.setAttribute('x1', '0%');
                    gradient.setAttribute('y1', '0%');
                    gradient.setAttribute('x2', '100%');
                    gradient.setAttribute('y2', '100%');

                    const stop1 = document.createElementNS('http://www.w3.org/2000/svg', 'stop');
                    stop1.setAttribute('offset', '0%');
                    stop1.setAttribute('style', 'stop-color:#f39c12;stop-opacity:1');

                    const stop2 = document.createElementNS('http://www.w3.org/2000/svg', 'stop');
                    stop2.setAttribute('offset', '100%');
                    stop2.setAttribute('style', 'stop-color:#e67e22;stop-opacity:1');

                    gradient.appendChild(stop1);
                    gradient.appendChild(stop2);
                    defs.appendChild(gradient);
                    svg.appendChild(defs);

                    // Draw cell rectangle
                    const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    rect.setAttribute('x', x);
                    rect.setAttribute('y', y);
                    rect.setAttribute('width', cellWidth);
                    rect.setAttribute('height', cellHeight);
                    rect.setAttribute('rx', cellRadius);
                    rect.setAttribute('fill', 'url(#' + gradientId + ')');
                    rect.setAttribute('stroke', '#d68910');
                    rect.setAttribute('stroke-width', '2');

                    cellGroup.appendChild(rect);

                    // Add cell number text
                    const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                    text.setAttribute('x', x + cellWidth / 2);
                    text.setAttribute('y', y + cellHeight / 2);
                    text.setAttribute('text-anchor', 'middle');
                    text.setAttribute('dominant-baseline', 'middle');
                    text.setAttribute('fill', '#000');
                    text.setAttribute('font-size', '10');
                    text.setAttribute('font-weight', 'bold');
                    text.textContent = (row * P + col + 1);

                    cellGroup.appendChild(text);
                    svg.appendChild(cellGroup);

                    // Draw parallel connections (horizontal)
                    if (col < P - 1) {
                        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                        line.setAttribute('x1', x + cellWidth);
                        line.setAttribute('y1', y + cellHeight / 2);
                        line.setAttribute('x2', x + cellWidth + cellGapX);
                        line.setAttribute('y2', y + cellHeight / 2);
                        line.setAttribute('stroke', '#2ecc71');
                        line.setAttribute('stroke-width', '3');
                        svg.appendChild(line);
                    }

                    // Draw series connections (vertical)
                    if (row < S - 1) {
                        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                        line.setAttribute('x1', x + cellWidth / 2);
                        line.setAttribute('y1', y + cellHeight);
                        line.setAttribute('x2', x + cellWidth / 2);
                        line.setAttribute('y2', y + cellHeight + cellGapY);
                        line.setAttribute('stroke', '#e74c3c');
                        line.setAttribute('stroke-width', '3');
                        svg.appendChild(line);
                    }
                }
            }

            // Add labels
            const seriesLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            seriesLabel.setAttribute('x', '10');
            seriesLabel.setAttribute('y', startY + (S * cellHeight + (S - 1) * cellGapY) / 2);
            seriesLabel.setAttribute('fill', '#e74c3c');
            seriesLabel.setAttribute('font-size', '14');
            seriesLabel.setAttribute('font-weight', 'bold');
            seriesLabel.textContent = S + 'S';
            svg.appendChild(seriesLabel);

            const parallelLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            parallelLabel.setAttribute('x', startX + (P * cellWidth + (P - 1) * cellGapX) / 2);
            parallelLabel.setAttribute('y', '30');
            parallelLabel.setAttribute('text-anchor', 'middle');
            parallelLabel.setAttribute('fill', '#2ecc71');
            parallelLabel.setAttribute('font-size', '14');
            parallelLabel.setAttribute('font-weight', 'bold');
            parallelLabel.textContent = P + 'P';
            svg.appendChild(parallelLabel);

            // Add pack terminals (+ and -)
            const terminalSize = 25;
            const terminalY = startY + S * cellHeight + (S - 1) * cellGapY + 40;

            // Negative terminal (left side, first cell)
            const negTerminalX = startX;

            // Draw negative terminal
            const negTerminal = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
            negTerminal.setAttribute('x', negTerminalX - 5);
            negTerminal.setAttribute('y', terminalY);
            negTerminal.setAttribute('width', terminalSize);
            negTerminal.setAttribute('height', terminalSize);
            negTerminal.setAttribute('fill', '#3498db');
            negTerminal.setAttribute('stroke', '#2980b9');
            negTerminal.setAttribute('stroke-width', '2');
            negTerminal.setAttribute('rx', '3');
            svg.appendChild(negTerminal);

            // Negative symbol
            const negSymbol = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            negSymbol.setAttribute('x', negTerminalX + 7);
            negSymbol.setAttribute('y', terminalY + 17);
            negSymbol.setAttribute('text-anchor', 'middle');
            negSymbol.setAttribute('fill', '#fff');
            negSymbol.setAttribute('font-size', '18');
            negSymbol.setAttribute('font-weight', 'bold');
            negSymbol.textContent = '‚àí';
            svg.appendChild(negSymbol);

            // Wire from bottom of first cell to negative terminal
            const negWire = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            negWire.setAttribute('x1', startX + cellWidth / 2);
            negWire.setAttribute('y1', startY + S * cellHeight + (S - 1) * cellGapY);
            negWire.setAttribute('x2', negTerminalX + 7);
            negWire.setAttribute('y2', terminalY);
            negWire.setAttribute('stroke', '#3498db');
            negWire.setAttribute('stroke-width', '4');
            svg.appendChild(negWire);

            // Positive terminal (right side, last cell)
            const posTerminalX = startX + (P - 1) * (cellWidth + cellGapX) + cellWidth - 5;

            // Draw positive terminal
            const posTerminal = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
            posTerminal.setAttribute('x', posTerminalX - 10);
            posTerminal.setAttribute('y', terminalY);
            posTerminal.setAttribute('width', terminalSize);
            posTerminal.setAttribute('height', terminalSize);
            posTerminal.setAttribute('fill', '#e74c3c');
            posTerminal.setAttribute('stroke', '#c0392b');
            posTerminal.setAttribute('stroke-width', '2');
            posTerminal.setAttribute('rx', '3');
            svg.appendChild(posTerminal);

            // Positive symbol
            const posSymbol = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            posSymbol.setAttribute('x', posTerminalX + 2);
            posSymbol.setAttribute('y', terminalY + 17);
            posSymbol.setAttribute('text-anchor', 'middle');
            posSymbol.setAttribute('fill', '#fff');
            posSymbol.setAttribute('font-size', '18');
            posSymbol.setAttribute('font-weight', 'bold');
            posSymbol.textContent = '+';
            svg.appendChild(posSymbol);

            // Wire from bottom of last cell to positive terminal
            const posWire = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            posWire.setAttribute('x1', posTerminalX - cellWidth / 2 + 15);
            posWire.setAttribute('y1', startY + S * cellHeight + (S - 1) * cellGapY);
            posWire.setAttribute('x2', posTerminalX + 2);
            posWire.setAttribute('y2', terminalY);
            posWire.setAttribute('stroke', '#e74c3c');
            posWire.setAttribute('stroke-width', '4');
            svg.appendChild(posWire);

            // Add labels for terminals
            const negLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            negLabel.setAttribute('x', negTerminalX + 7);
            negLabel.setAttribute('y', terminalY + terminalSize + 15);
            negLabel.setAttribute('text-anchor', 'middle');
            negLabel.setAttribute('fill', '#3498db');
            negLabel.setAttribute('font-size', '12');
            negLabel.setAttribute('font-weight', 'bold');
            negLabel.textContent = 'NEGATIVE';
            svg.appendChild(negLabel);

            const posLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            posLabel.setAttribute('x', posTerminalX + 2);
            posLabel.setAttribute('y', terminalY + terminalSize + 15);
            posLabel.setAttribute('text-anchor', 'middle');
            posLabel.setAttribute('fill', '#e74c3c');
            posLabel.setAttribute('font-size', '12');
            posLabel.setAttribute('font-weight', 'bold');
            posLabel.textContent = 'POSITIVE';
            svg.appendChild(posLabel);
        }

        // Show Under Development message on button
        function showUnderDevelopment() {
            const btn = document.querySelector("button[onclick='showUnderDevelopment()']");
            if (btn) {
                const originalText = btn.innerText;
                btn.innerText = "üöß Under Development";
                btn.style.backgroundColor = "#e74c3c"; // Optional: Change color to red

                setTimeout(() => {
                    btn.innerText = originalText;
                    btn.style.backgroundColor = ""; // Reset color
                }, 2000);
            } else {
                alert("This feature is currently under development.");
            }
        }
    </script>

</body>

</html>